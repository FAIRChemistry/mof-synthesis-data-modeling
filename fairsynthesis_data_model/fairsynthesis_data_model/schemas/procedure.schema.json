{
  "$defs": {
    "$xml_type": {
      "enum": [
        "Add",
        "HeatChill",
        "EvacuateAndRefill",
        "WashSolid",
        "Wait",
        "Evaporate",
        "Sonicate",
        "Dry"
      ],
      "type": "string"
    },
    "Hardware": {
      "properties": {
        "Component": {
          "items": {
            "$ref": "#/$defs/HardwareComponentsEntry"
          },
          "type": "array",
          "description": "reaction vessel"
        }
      },
      "type": "object",
      "description": "reaction vessel",
      "required": [
        "Component"
      ]
    },
    "HardwareComponents": {
      "description": "reaction vessel"
    },
    "HardwareComponentsEntry": {
      "properties": {
        "_vessel-type": {
          "type": "string",
          "enum": [
            "microwave vial",
            "Schlenk bomb"
          ],
          "description": "type of the reaction vessel"
        },
        "_volume-mL": {
          "type": "number",
          "description": "volume of the reaction vessel in mL",
          "minimum": 1,
          "maximum": 8
        }
      },
      "required": [
        "_volume-mL",
        "_vessel-type"
      ],
      "type": "object",
      "description": "reaction vessel"
    },
    "Metadata": {
      "properties": {
        "_description": {
          "type": "string",
          "description": "ID of the trial",
          "examples": [
            "KE-005"
          ],
          "pattern": "KE-\\d\\d\\d"
        }
      },
      "required": [
        "_description"
      ],
      "type": "object",
      "description": "other information about this trial"
    },
    "Procedure": {
      "properties": {
        "Prep": {
          "$ref": "#/$defs/StepsFlatProcedure",
          "description": "preparative procedures"
        },
        "Reaction": {
          "$ref": "#/$defs/StepsFlatProcedure",
          "description": "reaction procedures"
        },
        "Workup": {
          "$ref": "#/$defs/StepsFlatProcedure",
          "description": "workup procedures"
        }
      },
      "type": "object",
      "description": "procedures of this trial separated into different phases",
      "required": [
        "Prep",
        "Reaction",
        "Workup"
      ]
    },
    "Quantity": {
      "properties": {
        "Unit": {
          "enum": [
            "microgram",
            "milligram",
            "gram",
            "kilogram",
            "ton",
            "millisecond",
            "second",
            "minute",
            "hour",
            "day",
            "week",
            "kelvin",
            "microlitre",
            "millilitre",
            "centilitre",
            "decilitre",
            "litre",
            "ohm",
            "dimensionless",
            "item",
            "micromole",
            "millimole",
            "mole",
            "celsius",
            "kelvin",
            "millimeter",
            "centimeter",
            "meter",
            "pascal",
            "bar"
          ],
          "type": "string"
        },
        "Value": {
          "type": "number"
        }
      },
      "type": "object",
      "description": "physical quantity including a unit",
      "required": [
        "Unit",
        "Value"
      ]
    },
    "Reagents": {
      "properties": {
        "Reagent": {
          "items": {
            "$ref": "#/$defs/ReagentsEntry"
          },
          "type": "array",
          "description": "array of chemicals used in the reaction"
        }
      },
      "required": [
        "Reagent"
      ],
      "type": "object",
      "description": "array of chemicals used in the reaction"
    },
    "ReagentsEntry": {
      "properties": {
        "_cas": {
          "type": "string"
        },
        "_inchi": {
          "type": "string",
          "description": "InChI key of the chemical"
        },
        "_name": {
          "type": "string",
          "description": "name of the chemical, as described in the StepEntry"
        },
        "_purity": {
          "type": "string"
        },
        "_role": {
          "$ref": "#/$defs/_role",
          "description": "role of the chemical in the reaction"
        }
      },
      "type": "object",
      "description": "information of a chemical used in the reaction",
      "required": [
        "_name",
        "_inchi",
        "_role"
      ]
    },
    "StepEntry": {
      "oneOf": [
        {
          "title": "Add",
          "properties": {
            "$xml_type": {
              "const": "Add"
            },
            "_reagent": {
              "type": "string",
              "description": "name of the involved chemical as listed in the \"reagents\""
            },
            "_amount": {
              "$ref": "#/$defs/Quantity",
              "description": "amount of the involved chemical"
            }
          }
        },
        {
          "title": "HeatChill",
          "properties": {
            "$xml_type": {
              "const": "HeatChill"
            },
            "_temp": {
              "$ref": "#/$defs/Quantity",
              "properties": {
                "Unit": {
                  "const": "celsius"
                },
                "Value": {
                  "minimum": 20
                }
              },
              "type": "object",
              "description": "temperature in the case of HeatChill",
              "title": ""
            },
            "_time": {
              "$ref": "#/$defs/Quantity",
              "description": "time of the step in the case of HeatChill, Wait, Sonicate, or Dry"
            }
          }
        },
        {
          "title": "EvacuateAndRefill",
          "properties": {
            "$xml_type": {
              "const": "EvacuateAndRefill"
            },
            "_gas": {
              "type": "string",
              "const": "Ar",
              "description": "refilling gas in the case of EvacuateAndRefill"
            }
          }
        },
        {
          "title": "WashSolid",
          "properties": {
            "$xml_type": {
              "const": "WashSolid"
            },
            "_solvent": {
              "type": "string",
              "description": "name of the solvent in the case of WashSolid",
              "enum": [
                "CHCl3",
                "DMF",
                "MeOH",
                "acetone",
                "EtOH",
                "NaCl aq"
              ]
            }
          }
        },
        {
          "title": "Wait",
          "properties": {
            "$xml_type": {
              "const": "Wait"
            },
            "_time": {
              "$ref": "#/$defs/Quantity",
              "description": "time of the step in the case of HeatChill, Wait, Sonicate, or Dry"
            }
          }
        },
        {
          "title": "Evaporate",
          "properties": {
            "$xml_type": {
              "const": "Evaporate"
            },
            "_unknown": {
              "description": "Ken please add the corresponding attributes if existing"
            }
          }
        },
        {
          "title": "Sonicate",
          "properties": {
            "$xml_type": {
              "const": "Sonicate"
            },
            "_time": {
              "$ref": "#/$defs/Quantity",
              "description": "time of the step in the case of HeatChill, Wait, Sonicate, or Dry"
            }
          }
        },
        {
          "title": "Dry",
          "properties": {
            "$xml_type": {
              "const": "Dry"
            },
            "_time": {
              "$ref": "#/$defs/Quantity",
              "description": "time of the step in the case of HeatChill, Wait, Sonicate, or Dry"
            }
          }
        }
      ],
      "properties": {
        "$xml_type": {
          "$ref": "#/$defs/$xml_type",
          "description": "type of step"
        },
        "_amount": {
          "$ref": "#/$defs/Quantity",
          "description": "amount of the involved chemical"
        },
        "_gas": {
          "type": "string",
          "const": "Ar",
          "description": "refilling gas in the case of EvacuateAndRefill"
        },
        "_reagent": {
          "type": "string",
          "description": "name of the involved chemical as listed in the \"reagents\""
        },
        "_solvent": {
          "type": "string",
          "description": "name of the solvent in the case of WashSolid",
          "enum": [
            "CHCl3",
            "DMF",
            "MeOH",
            "acetone",
            "EtOH",
            "NaCl aq"
          ]
        },
        "_temp": {
          "$ref": "#/$defs/Quantity",
          "properties": {
            "Unit": {
              "const": "celsius"
            },
            "Value": {
              "minimum": 20
            }
          },
          "type": "object",
          "description": "temperature in the case of HeatChill",
          "title": ""
        },
        "_time": {
          "$ref": "#/$defs/Quantity",
          "description": "time of the step in the case of HeatChill, Wait, Sonicate, or Dry"
        }
      },
      "type": "object",
      "description": "each step of procedures",
      "required": [
        "$xml_type"
      ]
    },
    "StepsFlatProcedure": {
      "properties": {
        "Step": {
          "items": {
            "$ref": "#/$defs/StepEntry"
          },
          "type": "array",
          "description": "array of procedure steps"
        }
      },
      "required": [
        "Step"
      ],
      "description": "prep/reaction/workup procedures"
    },
    "SynthesisEntry": {
      "properties": {
        "Hardware": {
          "$ref": "#/$defs/Hardware",
          "description": "equipment used in this trial"
        },
        "Metadata": {
          "$ref": "#/$defs/Metadata",
          "description": "other information about this trial"
        },
        "Procedure": {
          "$ref": "#/$defs/Procedure",
          "description": "working procedures of this trial"
        },
        "Reagents": {
          "$ref": "#/$defs/Reagents",
          "description": "chemicals used in this trial"
        }
      },
      "required": [
        "Metadata",
        "Reagents",
        "Procedure",
        "Hardware"
      ],
      "type": "object",
      "description": "procedures of one synthetic trial"
    },
    "_role": {
      "enum": [
        "substrate",
        "solvent",
        "reagent",
        "acid"
      ],
      "type": "string"
    }
  },
  "definitions": {},
  "properties": {
    "Synthesis": {
      "items": {
        "$ref": "#/$defs/SynthesisEntry"
      },
      "type": "array",
      "description": "array of synthetic trials"
    }
  },
  "required": [
    "Synthesis"
  ],
  "title": "Synthetic procedures",
  "type": "object",
  "description": "procedures of synthetic trials"
}