{
  "$defs": {
    "SynthesisEntry": {
      "properties": {
        "Hardware": {
          "$ref": "#/$defs/Hardware"
        },
        "Metadata": {
          "$ref": "#/$defs/Metadata"
        },
        "Procedure": {
          "$ref": "#/$defs/ProcedureSections"
        },
        "Reagents": {
          "$ref": "#/$defs/Reagents"
        }
      },
      "required": [
        "Metadata",
        "Reagents",
        "Procedure",
        "Hardware"
      ],
      "type": "object"
    },
    "Hardware": {
      "properties": {
        "Component": {
          "items": {
            "$ref": "#/$defs/HardwareComponentsEntry"
          },
          "type": "array"
        }
      },
      "type": "object",
      "required": [
        "Component"
      ]
    },
    "HardwareComponentsEntry": {
      "properties": {
        "_chemical": {
          "type": "string"
        },
        "_comment": {
          "type": "string"
        },
        "_id": {
          "type": "string"
        },
        "_type": {
          "type": "string"
        }
      },
      "required": [
        "_id",
        "_type"
      ],
      "type": "object"
    },
    "Metadata": {
      "title": "Metadata",
      "properties": {
        "_description": {
          "type": "string"
        },
        "_product": {
          "type": "string"
        },
        "_product_inchi": {
          "type": "string"
        }
      },
      "required": [],
      "type": "object"
    },
    "ProcedureSections": {
      "title": "ProcedureSections",
      "properties": {
        "Prep": {
          "$ref": "#/$defs/ProcedureSection"
        },
        "Reaction": {
          "$ref": "#/$defs/ProcedureSection"
        },
        "Workup": {
          "$ref": "#/$defs/ProcedureSection"
        }
      },
      "required": [
        "Reaction",
        "Workup",
        "Prep"
      ]
    },
    "ProcedureSection": {
      "title": "ProcedureSection",
      "properties": {
        "Step": {
          "items": {
            "$ref": "#/$defs/StepEntry"
          },
          "type": "array"
        }
      },
      "required": [
        "Step"
      ]
    },
    "StepEntry": {
      "title": "StepEntry",
      "required": [
        "$xml_type"
      ],
      "properties": {
        "_vessel": {
          "type": "string"
        },
        "_comment": {
          "type": "string"
        }
      },
      "oneOf": [
        {
          "title": "Add",
          "required": [
            "_reagent",
            "_amount"
          ],
          "properties": {
            "$xml_type": {
              "const": "Add"
            },
            "_reagent": {
              "type": "string",
              "description": "name of the involved chemical as listed in the \"reagents\""
            },
            "_amount": {
              "$ref": "#/$defs/Quantity",
              "description": "amount of the involved chemical"
            }
          }
        },
        {
          "title": "HeatChill",
          "required": [
            "_temp",
            "_time"
          ],
          "properties": {
            "$xml_type": {
              "const": "HeatChill"
            },
            "_temp": {
              "$ref": "#/$defs/Temperature"
            },
            "_time": {
              "$ref": "#/$defs/Time"
            }
          }
        },
        {
          "title": "EvacuateAndRefill",
          "required": [
            "_gas"
          ],
          "properties": {
            "$xml_type": {
              "const": "EvacuateAndRefill"
            },
            "_gas": {
              "type": "string",
              "description": "refilling gas"
            }
          }
        },
        {
          "title": "WashSolid",
          "required": [
            "_solvent"
          ],
          "properties": {
            "$xml_type": {
              "const": "WashSolid"
            },
            "_solvent": {
              "type": "string"
            }
          }
        },
        {
          "title": "Wait",
          "required": [
            "_time"
          ],
          "properties": {
            "$xml_type": {
              "const": "Wait"
            },
            "_time": {
              "$ref": "#/$defs/Time"
            }
          }
        },
        {
          "title": "Sonicate",
          "properties": {
            "$xml_type": {
              "const": "Sonicate"
            },
            "_time": {
              "$ref": "#/$defs/Time"
            }
          },
          "required": [
            "_time"
          ]
        },
        {
          "required": [
            "_time",
            "_temp"
          ],
          "title": "Dry",
          "properties": {
            "$xml_type": {
              "const": "Dry"
            },
            "_time": {
              "$ref": "#/$defs/Time"
            },
            "_pressure": {
              "$ref": "#/$defs/Pressure"
            },
            "_temp": {
              "$ref": "#/$defs/Temperature"
            }
          }
        }
      ]
    },
    "Quantity": {
      "title": "Quantity",
      "properties": {
        "Unit": {
          "enum": [
            "microgram",
            "milligram",
            "gram",
            "kilogram",
            "ton",
            "millisecond",
            "second",
            "minute",
            "hour",
            "day",
            "week",
            "kelvin",
            "microlitre",
            "millilitre",
            "centilitre",
            "decilitre",
            "litre",
            "ohm",
            "dimensionless",
            "item",
            "micromole",
            "millimole",
            "mole",
            "celsius",
            "kelvin",
            "millimeter",
            "centimeter",
            "meter",
            "pascal",
            "bar"
          ],
          "type": "string"
        },
        "Value": {
          "type": "number"
        }
      },
      "type": "object",
      "required": [
        "Value",
        "Unit"
      ]
    },
    "Temperature": {
      "title": "Temperature",
      "$ref": "#/$defs/Quantity",
      "type": "object",
      "properties": {
        "Unit": {
          "const": "celsius"
        },
        "Value": {
          "minimum": -273.15,
          "type": "number"
        }
      },
      "required": [
        "Unit",
        "Value"
      ]
    },
    "Time": {
      "title": "Time",
      "$ref": "#/$defs/Quantity",
      "properties": {
        "Value": {
          "minimum": 0,
          "type": "number"
        },
        "Unit": {
          "type": "string"
        }
      },
      "required": [
        "Unit",
        "Value"
      ]
    },
    "Pressure": {
      "$ref": "#/$defs/Quantity",
      "title": "Pressure",
      "properties": {
        "Unit": {
          "type": "string"
        },
        "Value": {
          "minimum": 0,
          "type": "number"
        }
      },
      "required": [
        "Unit",
        "Value"
      ]
    },
    "Role": {
      "enum": [
        "substrate",
        "solvent",
        "reagent",
        "acid",
        "activating-agent",
        "base",
        "catalyst",
        "ligand",
        "quenching-agent"
      ],
      "type": "string"
    },
    "Reagents": {
      "properties": {
        "Reagent": {
          "items": {
            "$ref": "#/$defs/ReagentsEntry"
          },
          "type": "array"
        }
      },
      "required": [
        "Reagent"
      ],
      "type": "object"
    },
    "ReagentsEntry": {
      "properties": {
        "_cas": {
          "type": "string"
        },
        "_comment": {
          "type": "string"
        },
        "_id": {
          "type": "string"
        },
        "_inchi": {
          "type": "string"
        },
        "_name": {
          "type": "string"
        },
        "_purity": {
          "type": "string"
        },
        "_role": {
          "$ref": "#/$defs/Role"
        }
      },
      "type": "object",
      "required": [
        "_name",
        "_role",
        "_id"
      ]
    }
  },
  "properties": {
    "Synthesis": {
      "items": {
        "$ref": "#/$defs/SynthesisEntry"
      },
      "type": "array"
    }
  },
  "required": [
    "Synthesis"
  ],
  "title": "Synthesis Procedure",
  "type": "object"
}